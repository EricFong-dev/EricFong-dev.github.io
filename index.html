<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KLOOK å¤§ç£å€ç›²ç›’é«”é©—</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f8ff;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .selectors {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            max-width: 800px;
            width: 100%;
            margin: 30px 0;
        }

        .selector-group {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .selector-card {
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #eee;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .city-card.selected {
            border-color: #4CAF50;
            background: #E8F5E9;
        }

        .theme-card.selected {
            border-color: #2196F3;
            background: #E3F2FD;
        }

        /* æ‰­è›‹æ©Ÿå‹•ç•«æ¨£å¼ */
        .gacha-machine {
            position: relative;
            width: 300px;
            height: 400px;
            margin: 30px 0;
            display: none;
            z-index: 100;
        }

        .machine-body {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 80%;
            background: #FF5722;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .egg {
            position: absolute;
            width: 80px;
            height: 100px;
            left: 50%;
            top: 30%;
            transform: translateX(-50%);
            opacity: 0;
            z-index: 2;
            transition: all 0.5s;
        }

        @keyframes machineShake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(8deg); }
            50% { transform: rotate(-8deg); }
            75% { transform: rotate(4deg); }
            100% { transform: rotate(0deg); }
        }

        @keyframes eggDrop {
            0% { top: 30%; opacity: 0; }
            30% { top: 50%; opacity: 1; }
            100% { top: 70%; opacity: 1; }
        }

        @keyframes eggOpen {
            0% { transform: scale(1); }
            50% { transform: scale(1.2) rotate(15deg); }
            100% { transform: scale(0) rotate(30deg); }
        }

        #generate-btn, .buy-button {
            padding: 15px 40px;
            background: #FF6B6B;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s;
            margin: 10px;
        }

        .buy-button {
            background: #4CAF50;
        }

        .itinerary-box {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
        }

        .activity-item {
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
            background: #f8f9fa;
        }

        .highspeed-rail {
            color: #2196F3;
            font-weight: bold;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 8px;
            margin: 15px 0;
        }

        .total-price {
            font-size: 24px;
            color: #FF6B6B;
            text-align: right;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Klookæ—…æ¸¸ç›²ç›’é«”é©—</h1>

    <div class="selectors">
        <div class="selector-group">
            <h3>é¸æ“‡ç›®çš„åœ°</h3>
            <div class="city-card selector-card" data-city="æ·±åœ³">æ·±åœ³</div>
            <div class="city-card selector-card" data-city="å»£å·">å»£å·</div>
            <div class="city-card selector-card" data-city="ç æµ·">ç æµ·</div>
        </div>

        <div class="selector-group">
            <h3>é¸æ“‡ä¸»é¡Œ</h3>
            <div class="theme-card selector-card" data-theme="food">ç¾é£Ÿä¹‹æ—…</div>
            <div class="theme-card selector-card" data-theme="shopping">è³¼ç‰©ç‹‚æ­¡</div>
            <div class="theme-card selector-card" data-theme="culture">æ–‡åŒ–æ¢ç´¢</div>
        </div>
    </div>

    <button id="generate-btn">æŠ½ç›²ç›’ï¼</button>
    
    <div class="gacha-machine">
        <div class="machine-body"></div>
        <div class="egg">
            <img src="https://example.com/egg.png" alt="æ‰­è›‹" style="width:100%">
        </div>
    </div>

    <div class="itinerary-box" id="result"></div>

    <audio id="shake-sound">
        <source src="shake.mp3" type="audio/mpeg">
    </audio>
    <audio id="drop-sound">
        <source src="drop.mp3" type="audio/mpeg">
    </audio>
    <audio id="open-sound">
        <source src="open.mp3" type="audio/mpeg">
    </audio>

    <script>
        // éŸ³æ•ˆæ§åˆ¶
        const sounds = {
            shake: document.getElementById('shake-sound'),
            drop: document.getElementById('drop-sound'),
            open: document.getElementById('open-sound')
        };

        // å®Œæ•´è¡Œç¨‹æ•¸æ“šï¼ˆæ¯å€‹çµ„åˆ3å€‹æ–¹æ¡ˆï¼‰
        const demoData = {
            æ·±åœ³: {
                food: [
                    {
                        activities: [
                            { time: "09:00", name: "è€å­—è™Ÿæ—©èŒ¶é«”é©—", price: 120 },
                            { time: "12:30", name: "æµ·é®®å¸‚å ´ç¾é£ŸéŠ", price: 250 },
                            { time: "15:00", name: "å‰µæ„èŒ¶é£²å·¥ä½œåŠ", price: 80 }
                        ]
                    },
                    {
                        activities: [
                            { time: "10:00", name: "ç¶²ç´…ç«é‹åº—å¥—é¤", price: 180 },
                            { time: "13:00", name: "å¤œå¸‚å°åƒå·¡ç¦®", price: 150 },
                            { time: "16:30", name: "ç”œå“è£½ä½œé«”é©—", price: 90 }
                        ]
                    },
                    {
                        activities: [
                            { time: "08:30", name: "å‚³çµ±ç‡’è‡˜é«”é©—", price: 200 },
                            { time: "11:30", name: "ä¸»é¡Œé¤å»³åˆé¤", price: 180 },
                            { time: "15:30", name: "å’–å•¡æ‹‰èŠ±èª²ç¨‹", price: 100 }
                        ]
                    }
                ],
                shopping: [
                    {
                        activities: [
                            { time: "10:00", name: "è¬è±¡åŸè³¼ç‰©ç¦®åŒ…", price: 500 },
                            { time: "13:30", name: "é›»å­å¸‚å ´é«”é©—", price: 300 },
                            { time: "16:00", name: "å…ç¨…åº—å„ªæƒ åˆ¸", price: 200 }
                        ]
                    },
                    {
                        activities: [
                            { time: "11:00", name: "å¥¢ä¾ˆå“å°ˆè³£é«”é©—", price: 800 },
                            { time: "14:30", name: "è¨­è¨ˆå¸«å“ç‰Œåº—", price: 450 },
                            { time: "17:00", name: "ç¾å¦å…ç¨…å¥—é¤", price: 600 }
                        ]
                    },
                    {
                        activities: [
                            { time: "09:30", name: "æ‰¹ç™¼å¸‚å ´æ¢ç§˜", price: 150 },
                            { time: "13:00", name: "æ½®æµæœé£¾æ¡è³¼", price: 400 },
                            { time: "16:30", name: "æ•¸ç¢¼ç”¢å“é«”é©—", price: 350 }
                        ]
                    }
                ],
                culture: [
                    {
                        activities: [
                            { time: "09:00", name: "å¤åŸæ–‡åŒ–å°è¦½", price: 80 },
                            { time: "12:30", name: "ééºå·¥è—é«”é©—", price: 120 },
                            { time: "15:30", name: "ç¾ä»£è—è¡“å±•è¦½", price: 100 }
                        ]
                    },
                    {
                        activities: [
                            { time: "10:30", name: "æ­·å²åšç‰©é¤¨åƒè§€", price: 60 },
                            { time: "13:30", name: "å‚³çµ±æ‰‹ä½œé«”é©—", price: 150 },
                            { time: "16:00", name: "åŠ‡å ´è¡¨æ¼”é–€ç¥¨", price: 200 }
                        ]
                    },
                    {
                        activities: [
                            { time: "08:30", name: "å¯ºå»Ÿæ–‡åŒ–é«”é©—", price: 0 },
                            { time: "11:00", name: "å¤å»ºç¯‰æ”å½±éŠ", price: 80 },
                            { time: "15:00", name: "æ–‡å‰µåœ’å€å°è¦½", price: 90 }
                        ]
                    }
                ]
            },
            å»£å·: {
                culture: [
                    {
                        activities: [
                            { time: "09:00", name: "éŠè¦½å»£å·æ²™ç£å¤é®", price: 32 },
                            { time: "12:30", name: "ç²µåŠ‡æ–‡åŒ–é«”é©—", price: 120 },
                            { time: "21:30", name: "æ°¸æ…¶åŠç»é›²ç²¾é¸é…’åº—ä½å®¿å¥—é¤", price: 387 }
                        ]
                    },
                    {
                        activities: [
                            { time: "10:00", name: "æ¸…é å¤é¾å³½ç§äººå°è¦½", price: 60 },
                            { time: "13:00", name: "å¤¢å›å¶ºå—éŠæ¨‚å ´æ´»å‹•", price: 105 },
                            { time: "16:00", name: "å»£å·ç æ±Ÿå¤œéŠ", price: 50 }
                        ]
                    },
                    {
                        activities: [
                            { time: "08:30", name: "å¶ºå—å»ºç¯‰æ¢ç´¢", price: 70 },
                            { time: "11:30", name: "å»£å·é™³å®¶ç¥  å»£å·å¡”ç§äººå°è¦½ä¸€æ—¥éŠ", price: 796 },
                            { time: "19:00", name: "æµ·å¿ƒæ²™ç¢¼é ­ä¸Šèˆ¹å¤œéŠ", price: 614 }
                        ]
                    }
                ],
                food: [
    {
        activities: [
            { time: "09:30", name: "å»£å·å¾åŒ–è–è¨—åˆ©æ¸©æ³‰èŠåœ’æ—©é¤å¥—é¤", price: 621 },
            { time: "12:00", name: "ã€å»£å·èå‰µèŒ‚å°é¢ã€‘å»£å·èŠ±éƒ½é›²å±…é…’åº—åˆé¤", price: 508 },
            { time: "15:00", name: "ã€è¿‘å»£å·å¡”åœ°éµç«™ã€‘å»£å·ç¶æ´²æœƒå±•å»£å·å¡”åœ°éµç«™è¼•å±…é…’åº—æ™šé¤å¥—é¤", price: 813 }
        ]
    },
    {
        activities: [
            { time: "10:00", name: "å»£å·å‡ºç™¼ä½›å±±ç¥–å»Ÿ èˆç…ç››å®´ æ¸…æš‰åœ’ è¯è“‹æ­¥è¡Œè¡—å“åœ°é“é †å¾·ç¾é£Ÿ", price: 640 },
            { time: "13:00", name: "ã€è¿‘èå‰µæ™¯å€ã€‘å»£æ±ç¾è¯èˆªç©ºä¸»é¡Œé…’åº—ä½å®¿åˆé¤", price: 633 },
            { time: "16:00", name: "ã€è¿‘å»£å·ç†±é›ªå¥‡è¹Ÿã€‘å»£å·èŠ±éƒ½å¸Œçˆ¾é “æ­¡æœ‹é…’åº—æ™šé¤", price: 522 }
        ]
    },
    {
        activities: [
            { time: "08:00", name: "å»£å·å¾åŒ–å“æ€é“æ¸©æ³‰åº¦å‡é…’åº—æ—©é¤å¥—é¤", price: 621 },
            { time: "18:30", name: "å»£å·å¤œé–“ç¾é£Ÿä¹‹æ—…ï¼ˆç•¶åœ°äººå¸¶é ˜ï¼‰", price: 614 },
            { time: "21:30", name: "å»£å·å¾·å®‰éº—èˆå‡±è³“æ–¯åŸºé…’åº—æ™šé¤", price: 1061 }
        ]
    },
    {
        activities: [
            { time: "09:00", name: "å»£å·Wé…’åº—æ—©é¤å¥—é¤", price: 1160 },
            { time: "12:30", name: "å»£å·ç¾é£Ÿæ¢ç´¢ï¼ˆç§å®¶å°åœ˜+åŒ…è»ŠéŠè¦½+é™³å®¶ç¥ +æ°¸æ…¶åŠ+è–å¿ƒå¤§æ•™å ‚+åŒ—äº¬è·¯+ç æ±Ÿå¤œéŠï¼‰", price: 1212 },
            { time: "21:30", name: "å»£å·é¦™æ ¼é‡Œæ‹‰é£¯åº—æ™šé¤", price: 865 }
        ]
    },
    {
        activities: [
            { time: "10:30", name: "æ¸…é æ¸©æ³‰+ä½›å±±ç¾é£Ÿ", price: 299 },
            { time: "14:00", name: "å»£å·å¢åŸå¯ŒåŠ›è¬é”å˜‰è¯é…’åº—å°‹å‘³è€è¥¿é—œç¾é£Ÿ", price: 320 },
            { time: "17:00", name: "å»£å·ç¢§æ¡‚åœ“å¸Œçˆ¾é “é€¸æ—é…’åº—æ±èå…«æ™¯ç¾é£Ÿ", price: 638 }
        ]
    },
    {
        activities: [
            { time: "08:30", name: "å»£å·è”ç£æ»˜å£åœ°éµç«™äºæœµé…’åº—æ—©é¤å¥—é¤", price: 62 },
            { time: "12:00", name: "å»£å·å¯ŒåŠ›éº—æ€å¡çˆ¾é “é…’åº—åˆé¤", price: 198 },
            { time: "15:30", name: "å»£å·å¡éº—é…’åº—æ™šé¤", price: 405 }
        ]
    },
    {
        activities: [
            { time: "09:00", name: "å»£å·8è™Ÿè—è¡“æ›¬ç©€å ´", price: 32 },
            { time: "13:30", name: "ç¾è±ªéº—è‡´é…’åº—ï¼ˆå»£å·æ¼¢æºªé•·éš†åº—ï¼‰åˆé¤å¥—é¤", price: 432 },
            { time: "16:00", name: "å»£å·ç¾ä»£åŸå¸‚æ¢ç´¢", price: 410 }
        ]
    },
    {
        activities: [
            { time: "10:00", name: "å»£å·ä¸­åœ‹å¤§é…’åº—æ—©é¤å¥—é¤", price: 1208 },
            { time: "14:00", name: "ã€è¿‘å»£å·å¡”ã€‘å»£å·é¦™æ ¼é‡Œæ‹‰é…’åº—åˆé¤å¥—é¤", price: 1678 },
            { time: "17:30", name: "å»£å·å“æ€é“é…’åº—æ™šé¤", price: 1056 }
        ]
    }
],
                shopping: [
                    {
                        activities: [
                            { time: "10:00", name: "å¤©æ²³åŸè³¼ç‰©å¥—ç¥¨", price: 400 },
                            { time: "13:30", name: "åŒ—äº¬è·¯æ­¥è¡Œè¡—ç¦®åŒ…", price: 300 },
                            { time: "16:00", name: "ä¸Šä¸‹ä¹æ‰‹ä¿¡å„ªæƒ åˆ¸", price: 200 }
                        ]
                    },
                    {
                        activities: [
                            { time: "11:00", name: "å¤ªå¤åŒ¯å¥¢ä¾ˆå“é«”é©—", price: 600 },
                            { time: "14:30", name: "è¬è±æ‰¹ç™¼å¸‚å ´æ¢ç§˜", price: 150 },
                            { time: "17:00", name: "ç æ±Ÿæ–°åŸè³¼ç‰©åˆ¸", price: 350 }
                        ]
                    },
                    {
                        activities: [
                            { time: "09:30", name: "æ²™æ²³æœè£æ‰¹ç™¼", price: 250 },
                            { time: "13:00", name: "ä¸€å¾·è·¯ä¹¾è²¨å¸‚å ´", price: 180 },
                            { time: "16:30", name: "ç¾å¦é›†åˆåº—é«”é©—", price: 300 }
                        ]
                    }
                ]
            },
            ç æµ·: {
                shopping: [
                    {
                        activities: [
                            { time: "10:00", name: "å…ç¨…åŸè³¼ç‰©åˆ¸", price: 600 },
                            { time: "13:30", name: "ç å¯¶æ‰¹ç™¼å¸‚å ´", price: 800 },
                            { time: "16:00", name: "è¨­è¨ˆå¸«é›†åˆåº—", price: 400 }
                        ]
                    },
                    {
                        activities: [
                            { time: "11:00", name: "æµ·å‘³ä¹¾è²¨æ¡è³¼", price: 300 },
                            { time: "14:00", name: "è·¨å¢ƒå•†å“é«”é©—", price: 500 },
                            { time: "17:00", name: "å¥¢ä¾ˆå“æŠ˜æ‰£åº—", price: 700 }
                        ]
                    },
                    {
                        activities: [
                            { time: "09:30", name: "å¥§ç‰¹èŠæ–¯å„ªæƒ åˆ¸", price: 450 },
                            { time: "13:00", name: "æœ¬åœ°ç‰¹ç”¢æ¡è³¼", price: 200 },
                            { time: "16:30", name: "é›»å­ç”¢å“é«”é©—", price: 350 }
                        ]
                    }
                ],
                food: [
                    {
                        activities: [
                            { time: "10:00", name: "æ©«ç´è ”ç¾é£Ÿé«”é©—", price: 200 },
                            { time: "12:30", name: "æ–—é–€é‡æ®¼èŸ¹å¥—é¤", price: 350 },
                            { time: "15:00", name: "ç æµ·æ¼å¥³èŒ¶é»å¥—é¤", price: 120 }
                        ]
                    },
                    {
                        activities: [
                            { time: "11:00", name: "ç£ä»”æµ·é®®è¡—é«”é©—", price: 280 },
                            { time: "13:30", name: "é‡‘æ‚…è»’æ—©èŒ¶å¥—é¤", price: 180 },
                            { time: "16:00", name: "æ¾³é–€è‘¡æ’»å·¥ä½œåŠ", price: 90 }
                        ]
                    },
                    {
                        activities: [
                            { time: "09:00", name: "å‚³çµ±èŒ¶æœè£½ä½œ", price: 60 },
                            { time: "12:00", name: "æµ·é®®ç«é‹é«”é©—", price: 320 },
                            { time: "15:30", name: "è‘¡å¼æ–™ç†èª²ç¨‹", price: 150 }
                        ]
                    }
                ],
                culture: [
                    {
                        activities: [
                            { time: "09:00", name: "åœ“æ˜æ–°åœ’å°è¦½å¥—ç¥¨", price: 100 },
                            { time: "12:30", name: "å”å®¶ç£å¤é®åƒè§€", price: 0 },
                            { time: "15:00", name: "ç æµ·åšç‰©é¤¨é–€ç¥¨", price: 50 }
                        ]
                    },
                    {
                        activities: [
                            { time: "10:00", name: "åŒ—å±±æ‘æ–‡å‰µé«”é©—", price: 80 },
                            { time: "13:00", name: "æ·‡æ¾³å³¶ç´…æ¨¹æ—å°è¦½", price: 60 },
                            { time: "15:30", name: "å®¹é–ç´€å¿µé¤¨åƒè§€", price: 30 }
                        ]
                    },
                    {
                        activities: [
                            { time: "08:30", name: "æ–—é–€å¤è¡—éŠè¦½", price: 0 },
                            { time: "11:30", name: "æ°´ä¸Šå©šå«è¡¨æ¼”", price: 90 },
                            { time: "15:00", name: "æµ·æ´‹æ–‡åŒ–å±•è¦½", price: 70 }
                        ]
                    }
                ]
            }
        };

        let selectedCity = null;
        let selectedTheme = null;
        let isAnimating = false;

        // ç¶å®šé¸æ“‡äº‹ä»¶
        document.querySelectorAll('.city-card').forEach(card => {
            card.addEventListener('click', function() {
                if(isAnimating) return;
                document.querySelectorAll('.city-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedCity = this.dataset.city;
            });
        });

        document.querySelectorAll('.theme-card').forEach(card => {
            card.addEventListener('click', function() {
                if(isAnimating) return;
                document.querySelectorAll('.theme-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedTheme = this.dataset.theme;
            });
        });

        // å‹•ç•«æ§åˆ¶
        async function playGachaAnimation() {
            return new Promise(resolve => {
                const machine = document.querySelector('.gacha-machine');
                const egg = document.querySelector('.egg');

                // é‡ç½®ç‹€æ…‹
                machine.style.display = 'block';
                egg.style.opacity = '0';
                egg.style.top = '30%';
                egg.style.animation = 'none';
                machine.style.animation = 'none';
                void machine.offsetHeight; // å¼·åˆ¶é‡ç¹ª

                // å•Ÿå‹•å‹•ç•«
                machine.style.animation = 'machineShake 1s ease-in-out';
                egg.style.animation = 'eggDrop 1s ease-out forwards';

                // æ’­æ”¾éŸ³æ•ˆ
                sounds.shake.play();
                setTimeout(() => sounds.drop.play(), 300);

                const finishAnimation = () => {
                    sounds.open.play();
                    egg.style.animation = 'eggOpen 0.8s ease-out forwards';
                    setTimeout(() => {
                        machine.style.display = 'none';
                        resolve();
                    }, 800);
                };

                egg.addEventListener('animationend', finishAnimation, {once: true});
            });
        }

        // ç”Ÿæˆè¡Œç¨‹
        document.getElementById('generate-btn').addEventListener('click', async () => {
            if(isAnimating) return;
            if(!selectedCity || !selectedTheme) return alert('è«‹å…ˆé¸æ“‡ç›®çš„åœ°å’Œä¸»é¡Œï¼');

            isAnimating = true;
            const resultDiv = document.getElementById('result');
            
            try {
                resultDiv.style.display = 'none';
                await playGachaAnimation();
                
                const itineraries = demoData[selectedCity][selectedTheme];
                const randomIndex = Math.floor(Math.random() * itineraries.length);
                const selectedItinerary = itineraries[randomIndex];
                const totalPrice = 196 + selectedItinerary.activities.reduce((sum, a) => sum + a.price, 0);

                resultDiv.innerHTML = `
                    <div class="highspeed-rail">
                        ğŸš… å»ç¨‹é«˜éµï¼šè¥¿ä¹é¾ç«™ â†’ ${selectedCity} (08:00 - 08:40)
                        <div class="price">ç¥¨åƒ¹ï¼šHK$ 200</div>
                    </div>
                    ${selectedItinerary.activities.map(a => `
                        <div class="activity-item">
                            <div class="time">${a.time}</div>
                            <div class="name">${a.name}</div>
                            <div class="price">KLOOKå¥—ç¥¨åƒ¹æ ¼ï¼šHK$ ${a.price}</div>
                        </div>
                    `).join('')}
                    <div class="highspeed-rail">
                        ğŸš… è¿”ç¨‹é«˜éµï¼š${selectedCity} â†’ è¥¿ä¹é¾ç«™ (22:30 - 23:10)
                        <div class="price">ç¥¨åƒ¹ï¼šHK$ 200</div>
                    </div>
                    <div class="total-price">
                        ç¸½åƒ¹æ ¼ï¼šHK$ ${totalPrice}
                    </div>
                    <button class="buy-button" onclick="handlePurchase()">ä¸€éµè³¼è²·</button>
                `;
                resultDiv.style.display = 'block';
                
            } catch (error) {
                console.error('æµç¨‹éŒ¯èª¤:', error);
                alert('ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹åˆ·æ–°é é¢é‡è©¦');
            } finally {
                isAnimating = false;
            }
        });

        // è³¼è²·åŠŸèƒ½
        window.handlePurchase = () => {
            alert('å³å°‡è·³è½‰è‡³æ”¯ä»˜é é¢ï¼\næ­¤ç‚ºæ¼”ç¤ºåŠŸèƒ½ï¼Œå¯¦éš›éœ€æ¥å…¥æ”¯ä»˜æ¥å£');
        }
    </script>
</body>
</html>